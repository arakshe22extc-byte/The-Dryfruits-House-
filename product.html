<script>
document.addEventListener('DOMContentLoaded', function() {
    // Start empty cart safely
    let cart = [];

    const addButtons = document.querySelectorAll('.add-to-cart');
    const cartItems = document.getElementById('cart-items');
    const cartTotal = document.getElementById('cart-total');

    function updateCart() {
        if(!cartItems || !cartTotal) return;
        cartItems.innerHTML = '';
        let total = 0;

        if(cart.length === 0){
            cartTotal.textContent = 0;
            return;
        }

        cart.forEach(item => {
            const li = document.createElement('li');
            li.textContent = `${item.name} x ${item.quantity} = â‚¹${item.price * item.quantity}`;
            cartItems.appendChild(li);
            total += item.price * item.quantity;
        });

        cartTotal.textContent = total;
    }

    updateCart();

    addButtons.forEach(btn => {
        btn.addEventListener('click', () => {
            const input = btn.previousElementSibling;
            if(!input) return;

            const quantity = parseInt(input.value);
            if(quantity <= 0) { alert("Please select quantity!"); return; }

            const name = btn.dataset.name;
            const price = parseInt(btn.dataset.price);

            const existing = cart.find(item => item.name === name);
            if(existing) existing.quantity += quantity;
            else cart.push({name, price, quantity});

            updateCart();
            alert(`${name} added to cart!`);
        });
    });
});
</script>
