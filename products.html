<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Products - The DryFruits House</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header>
<h1>The DryFruits House</h1>
<nav>
<a href="index.html">Home</a>
<a href="products.html">Products</a>
<a href="order.html">Order</a>
</nav>
</header>

<section class="products">
<h2>Our Products</h2>

<div class="product-grid">

    <!-- Badam -->
    <div class="product-card">
        <img src="images/badam.jpg">
        <h3>Badam (Almond)</h3>
        <p>₹1020 / kg</p>
        <input id="Almond-qty" type="number" min="0" value="0" class="qty">
        <button class="btn add-btn" data-name="Almond" data-price="1020">Add to Cart</button>
    </div>

    <!-- Ghee -->
    <div class="product-card">
        <img src="images/ghee.jpg">
        <h3>Ghee</h3>
        <p>₹950 / liter</p>
        <input id="Ghee-qty" type="number" min="0" value="0" class="qty">
        <button class="btn add-btn" data-name="Ghee" data-price="950">Add to Cart</button>
    </div>

    <!-- Black Raisins -->
    <div class="product-card">
        <img src="images/blackraisins.jpg">
        <h3>Black Raisins</h3>
        <p>₹220 / 250g</p>
        <input id="Black Raisins-qty" type="number" min="0" value="0" class="qty">
        <button class="btn add-btn" data-name="Black Raisins" data-price="220">Add to Cart</button>
    </div>

    <!-- Raisins -->
    <div class="product-card">
        <img src="images/raisins.jpg">
        <h3>Raisins</h3>
        <p>₹200 / 250g</p>
        <input id="Raisins-qty" type="number" min="0" value="0" class="qty">
        <button class="btn add-btn" data-name="Raisins" data-price="200">Add to Cart</button>
    </div>

    <!-- Pista -->
    <div class="product-card">
        <img src="images/pista.jpg">
        <h3>Pista</h3>
        <p>₹350 / 250g</p>
        <input id="Pista-qty" type="number" min="0" value="0" class="qty">
        <button class="btn add-btn" data-name="Pista" data-price="350">Add to Cart</button>
    </div>

</div>

<div class="cart-summary">
<h3>Cart Summary</h3>
<ul id="cartList"></ul>
<p><strong>Total: ₹<span id="cartTotal">0</span></strong></p>
<a href="order.html" class="btn">Proceed to Order</a>
</div>

</section>

<script>
document.addEventListener("DOMContentLoaded", function () {

    let cart = JSON.parse(localStorage.getItem("currentCart")) || [];

    const buttons = document.querySelectorAll(".add-btn");
    const cartList = document.getElementById("cartList");
    const cartTotal = document.getElementById("cartTotal");

    // Add product to cart
    buttons.forEach(btn => {
        btn.addEventListener("click", function () {

            let name = this.dataset.name;
            let price = parseInt(this.dataset.price);
            let qty = parseInt(document.getElementById(name + "-qty").value);

            if (qty <= 0) {
                alert("Enter a valid quantity!");
                return;
            }

            let existing = cart.find(item => item.name === name);

            if (existing) {
                existing.quantity += qty;
            } else {
                cart.push({
                    name: name,
                    price: price,
                    quantity: qty
                });
            }

            localStorage.setItem("currentCart", JSON.stringify(cart));
            displayCart();
            alert(name + " added to cart!");
        });
    });

    // Display cart in summary
    function displayCart() {
        cartList.innerHTML = "";
        let total = 0;

        cart.forEach(item => {
            let li = document.createElement("li");
            li.textContent = `${item.name} — ${item.quantity} pcs`;
            cartList.appendChild(li);
            total += item.quantity * item.price;
        });

        cartTotal.textContent = total;
    }

    displayCart();
});
</script>

</body>
</html>
